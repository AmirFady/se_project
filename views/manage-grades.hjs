<!DOCTYPE html>
<html>
  <head>
    <title>Users</title>
    <link rel='stylesheet' href='/styles/bootstrap.min.css' />
    <link rel='stylesheet' href='/styles/style.css' />
    <script src="/js/jquery-2.2.0.min.js" type="text/javascript"></script>
    <script src="/js/bootstrap.min.js" type="text/javascript"></script>
  </head>
  <body>
       <script>
       $(document).ready(function(){
        $("#update").click(function() {
          console.log("clicked")
        const gradeElements = document.getElementsByName("grade");
        const data = [];
        for (const gradeElement in gradeElemets) {
          grade = gradeElement.val();
          userId = gradeElement.id();
          data.push({"userId": userId, "grade": grade})
        }
        console.log(data);
        $.ajax({
          type: "GET",
          url: /api/v1/enrollment/:courseId,
          success: function(serverResponse){
            if(serverResponse) {
              alert(JSON.stringify(serverResponse));
            }
          }
        });
        });
        });

        $("#update").click(function() {
        const grade = $('#update').val();
        const data = {
          grade,
        };

        $.ajax({
          type: "PUT",
          url: /api/v1/enrollment/:courseId,
          success: function(serverResponse){
            if(serverResponse) {
              alert(JSON.stringify(serverResponse));
            }
          }
        });
       }
    </script>

    <div>
    <div>
    {{#isAdmin}}
        <nav class="navbar navbar-inverse" style="padding-left:130px;">
          <ul class="nav navbar-nav">
            <li><a href="/dashboard">Home</a></li>
            <li><a href="/manage/grades">Manage Grades</a></li>
            <li><a href="/manage/courses">Manage Courses</a></li>
            <li><a href="/manage/requests">Manage Requests</a></li>
            <li><a href="/">Logout</a></li>
          </ul>
       </nav>
    {{/isAdmin}}

    {{#isStudent}}
        <nav class="navbar navbar-inverse" style="padding-left:130px;">
          <ul class="nav navbar-nav">
            <li><a href="/dashboard">Home</a></li>
            <li><a href="/transcripts">Transcripts</a></li>
            <li><a href="/courses">Courses</a></li>
            <li><a href="/transfer">transfer requests</a></li>
            <li><a href="/">Logout</a></li>
          </ul>
       </nav>
    {{/isStudent}}
  </div>
    <br/>
      <table class="table">
        <thead>
          <tr>
            <th scope="col">student id</th>
            <th scope="col">student Name</th>
            <th scope="col">grade</th>
          </tr>
          {{#enrollment}}
            <tr>
              <td>{{userId}}</td>
              <td>{{firstName}}</td>
              <td><input type="text" class="form-control" id="{{userId}}" name="grade" placeholder="grade" value="{{grade}}"></td>
            </tr>
          {{/enrollment}}
          <input id="update" name="update" type="button" value="update" class="btn btn-primary">
        </thead>
      </table>
    </div>
  </body>
  </html>